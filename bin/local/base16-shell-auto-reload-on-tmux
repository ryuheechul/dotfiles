#!/usr/bin/env bash

# running this inside tmux will be limiting to only one session
# therefore it's recommened to run this outside tmux

# prevent failure when there is no such file (initially)
touch ~/.base16_theme.updated-time

echo "this process is to watch the base16-shell's theme change and apply automatically using tmux"

# `-n`: non-interactive mode which makes possible to run as daemon
# `-p`: "postpone" the first execution until the change is detected
ls ~/.base16_theme.updated-time | entr -p -n bash -c 'tmux new-window "sleep 0.1 && source ~/.base16_theme && exit"'
