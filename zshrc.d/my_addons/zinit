# vim: set ft=zsh:


### Added by Zinit's installer
if [[ ! -f $HOME/.local/share/zinit/zinit.git/zinit.zsh ]]; then
    print -P "%F{33} %F{220}Installing %F{33}ZDHARMA-CONTINUUM%F{220} Initiative Plugin Manager (%F{33}zdharma-continuum/zinit%F{220})â€¦%f"
    command mkdir -p "$HOME/.local/share/zinit" && command chmod g-rwX "$HOME/.local/share/zinit"
    command git clone https://github.com/zdharma-continuum/zinit "$HOME/.local/share/zinit/zinit.git" && \
        print -P "%F{33} %F{34}Installation successful.%f%b" || \
        print -P "%F{160} The clone has failed.%f%b"
fi

source "$HOME/.local/share/zinit/zinit.git/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit
### End of Zinit's installer chunk

## things doesn't work with zsh-defer

# git aliases like grt
zinit snippet OMZP::git
# j to jump around directory
zinit snippet OMZP::fasd
# to persist history
zinit snippet OMZL::history.zsh
# this seems to be not in effect because other similar plugins so disabling for now
# zinit light Aloxaf/fzf-tab

# cache to eval to enhance performance
zinit light mroth/evalcache
# this loads zsh-defer faster
zinit light romkatv/zsh-defer

## use zsh-defer for anything that's possible

zsh-defer zinit load romkatv/zsh-defer

zsh-defer zinit snippet OMZL::directories.zsh

# to enable case insensitive completion - https://github.com/ohmyzsh/ohmyzsh/blob/3f42700c0d65cf26470d1e165b8ed80dfff9efca/lib/completion.zsh#L23
zsh-defer zinit snippet OMZL::completion.zsh

# # necessary for OMZP::git
# zsh-defer zinit snippet OMZL::git.zsh

# kind of like ls + git status
zsh-defer zinit light supercrabtree/k
# bd [n] to go up multi steps at once
zsh-defer zinit light Tarrasch/zsh-bd
# git open to open origin via browser
zsh-defer zinit light paulirish/git-open

# additional configuration for marlonrichert/zsh-autocomplete
# these need to be defined before loading marlonrichert/zsh-autocomplete
# therefore before loading ./znap which is here
# zstyle ':autocomplete:*' widget-style menu-select
zstyle ':autocomplete:*' widget-style menu-complete
zstyle ':autocomplete:*' fzf-completion yes
# end of additional configuration for marlonrichert/zsh-autocomplete

# now slow plugins can be loaded via ./znap
CURR_DIR=~/.config/dfs-rhc/zshrc.d/my_addons
zsh-defer zinit snippet "${CURR_DIR}/znap"

# somehow this should be placed in the bottom to intefere others
zsh-defer zinit ice as"program" make'!' atclone'./direnv hook zsh > zhook.zsh' \
   atpull'%atclone' pick"direnv" src"zhook.zsh"
